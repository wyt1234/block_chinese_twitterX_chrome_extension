# X(Twitter) 中文帖子过滤器

一个Chrome扩展程序，用于自动隐藏X(Twitter)上的中文帖子和广告，让您的时间线更清爽。

## 功能特性

- 🇨🇳 **智能中文检测**：准确识别并隐藏中文推文
- 🚫 **广告屏蔽**：自动识别和隐藏推广内容
- ⚡ **实时过滤**：动态监测新加载的内容
- 🎨 **视觉效果**：平滑的隐藏动画和通知提示
- 📊 **统计功能**：实时显示已屏蔽的内容数量
- 🔧 **可配置**：可开关视觉效果，支持重置统计

## 安装方法

1. 下载或克隆此仓库
2. 打开Chrome浏览器，进入 `chrome://extensions/`
3. 开启"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目文件夹
6. 访问 [X.com](https://x.com) 或 [Twitter.com](https://twitter.com) 开始使用

## 使用说明

### 基本功能
- 扩展程序安装后会自动运行
- 中文推文会被自动隐藏
- 广告和推广内容会被自动屏蔽
- 点击扩展程序图标查看统计信息

### 控制面板
- **🇨🇳 已隐藏中文帖子**：显示隐藏的中文推文数量
- **🚫 已屏蔽广告**：显示屏蔽的广告数量
- **⚡ 插件状态**：显示扩展程序运行状态
- **视觉效果开关**：控制隐藏动画和通知
- **🔄 刷新按钮**：重新扫描和处理页面内容
- **🗑️ 重置按钮**：清空统计数据并恢复隐藏的推文

## 检测机制

### 中文检测
- 使用Unicode范围 `[\u4e00-\u9fff]` 检测中文字符
- 仅检测推文正文内容，不包括用户名等元信息

### 广告检测
扩展程序使用多层检测机制：
1. **推广指示器**：查找 `[data-testid="promotedIndicator"]`
2. **广告标识元素**：查找包含广告相关的data-testid
3. **aria-label检测**：检查推广相关的标签
4. **推文文本检测**：在推文正文中查找广告关键词
5. **用户名区域检测**：检查用户名旁的推广标识
6. **时间戳区域检测**：检查时间戳区域的推广标识

### 广告关键词
- `Promoted`、`推广`
- `Sponsored`、`赞助`
- `广告`
- `Promoted Tweet`、`推广推文`

## 问题排查

### 如果正常推文被误屏蔽

1. **开启调试模式**：
   - 按 F12 打开开发者工具
   - 切换到 Console 标签页
   - 查看 `[Chinese Filter]` 开头的日志信息

2. **检查误判原因**：
   ```javascript
   // 在控制台运行以下代码查看详细检测信息
   document.querySelectorAll('article').forEach((article, index) => {
       console.log(`推文 ${index}:`, article);
       console.log('推文文本:', article.querySelector('[data-testid="tweetText"]')?.textContent);
   });
   ```

3. **使用测试脚本**：
   - 在浏览器控制台中运行 `test_filter.js` 脚本
   - 查看测试结果来验证检测逻辑

### 常见问题

**Q: 为什么有些中文推文没有被隐藏？**
A: 可能是推文结构异常或包含大量英文内容。可以点击刷新按钮重新处理。

**Q: 为什么正常的英文推文被隐藏了？**
A: 检查是否包含了广告关键词或特殊字符。参考上面的调试方法。

**Q: 扩展程序状态显示"离线"？**
A: 刷新页面或重新加载扩展程序。

**Q: 隐藏的推文太多，想要恢复？**
A: 点击控制面板中的"重置"按钮。

## 技术细节

### 文件结构
- `manifest.json` - 扩展程序配置文件
- `content.js` - 主要的内容脚本，负责检测和隐藏
- `popup.html/popup.js` - 弹出窗口界面和逻辑
- `styles.css` - 样式文件
- `test_filter.js` - 测试脚本

### 性能优化
- 使用防抖机制减少频繁处理
- WeakSet 存储已处理元素避免内存泄漏
- 精确的选择器减少无效查询
- 节流滚动事件监听

### 兼容性
- 支持 Chrome 88+
- 兼容新版 X.com 和旧版 Twitter.com
- 响应式设计适配不同屏幕尺寸

## 开发和贡献

### 本地开发
1. 克隆仓库
2. 修改代码
3. 在Chrome中重新加载扩展程序
4. 测试功能

### 调试技巧
- 修改 `CONFIG.debugMode = true` 启用详细日志
- 使用 `test_filter.js` 验证检测逻辑
- 检查浏览器控制台的错误信息

## 版本历史

### v1.1 (当前版本)
- 🛠️ 修复误判问题，提高检测准确性
- 🎯 优化广告检测逻辑，减少误报
- 📝 添加详细的调试日志
- 🧪 提供测试脚本验证功能

### v1.0
- 🚀 初始版本发布
- ✨ 基本的中文和广告检测功能
- 🎨 视觉效果和通知系统
- 📊 统计功能

## 许可证

MIT License

## 反馈和支持

如果遇到问题或有改进建议，请：
1. 查看本文档的问题排查部分
2. 使用测试脚本验证问题
3. 提供详细的错误信息和复现步骤

---

**注意**：此扩展程序仅用于个人使用，请遵守相关平台的使用条款。
